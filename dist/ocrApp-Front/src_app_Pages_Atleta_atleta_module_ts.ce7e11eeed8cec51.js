"use strict";(self.webpackChunkembryo=self.webpackChunkembryo||[]).push([["src_app_Pages_Atleta_atleta_module_ts"],{28760:(ot,v,o)=>{o.r(v),o.d(v,{AtletaModule:()=>m});var c=o(36895),g=o(9116),F=o(15861),r=o(24006),t=o(94650),y=o(25067),_=o(22390),f=o(1576),h=o(73546),x=o(4859),p=o(59549),U=o(44144),Z=o(51572),A=o(84385),T=o(3238);function I(n,e){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"El campo no puede estar vac\xedo"),t.qZA())}function J(n,e){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"El campo no puede estar vac\xedo"),t.qZA())}function N(n,e){if(1&n){const a=t.EpF();t.TgZ(0,"mat-option",21),t.NdJ("click",function(){const d=t.CHM(a).$implicit,C=t.oxw(3);return t.KtG(C.selectCompetencia(d))}),t._uU(1),t.qZA()}if(2&n){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij("\n                             ",a.nombre,"\n                          ")}}function S(n,e){if(1&n&&(t.TgZ(0,"mat-select",20),t._uU(1,"\n                          "),t.TgZ(2,"mat-option"),t._uU(3,"Seleccionar una Competencia"),t.qZA(),t._uU(4,"\n                          "),t.YNc(5,N,2,2,"mat-option",16),t._uU(6,"\n                        "),t.qZA()),2&n){const a=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",a.competenciaList)}}function E(n,e){if(1&n){const a=t.EpF();t.TgZ(0,"mat-option",21),t.NdJ("click",function(){const d=t.CHM(a).$implicit,C=t.oxw(2);return t.KtG(C.selectCategoria(d))}),t._uU(1),t.qZA()}if(2&n){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij("\n                             ",a.nombre,"\n                          ")}}function L(n,e){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"El campo no puede estar vac\xedo"),t.qZA())}function B(n,e){1&n&&(t.TgZ(0,"span"),t._uU(1,"\n                      Registrarse\n                    "),t.qZA())}function Q(n,e){1&n&&(t.TgZ(0,"mat-progress-spinner",22),t._uU(1,"\n                    "),t.qZA()),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}function Y(n,e){if(1&n){const a=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(a);const i=t.oxw();return t.KtG(i.onSubmit())}),t._uU(1,"\n                  "),t.TgZ(2,"div",9),t._uU(3,"\n                    "),t.TgZ(4,"mat-form-field",10),t._uU(5,"\n                      "),t._UZ(6,"input",11),t._uU(7,"\n                      "),t.YNc(8,I,2,0,"mat-error",12),t._uU(9," \n                    "),t.qZA(),t._uU(10,"\n\n                    "),t.TgZ(11,"mat-form-field",10),t._uU(12,"\n                      "),t._UZ(13,"input",13),t._uU(14,"\n                      "),t.YNc(15,J,2,0,"mat-error",12),t._uU(16," \n                    "),t.qZA(),t._uU(17,"\n\n                    "),t.TgZ(18,"mat-form-field",10),t._uU(19,"\n                        "),t.YNc(20,S,7,1,"mat-select",14),t._uU(21,"\n                    "),t.qZA(),t._uU(22,"\n\n                    "),t.TgZ(23,"mat-form-field",10),t._uU(24,"\n                        "),t.TgZ(25,"mat-select",15),t._uU(26,"\n                          "),t.TgZ(27,"mat-option"),t._uU(28,"Seleccionar una Categor\xeda"),t.qZA(),t._uU(29,"\n                          "),t.YNc(30,E,2,2,"mat-option",16),t._uU(31,"\n                        "),t.qZA(),t._uU(32,"\n                        "),t.YNc(33,L,2,0,"mat-error",12),t._uU(34," \n                    "),t.qZA(),t._uU(35,"\n\n                    "),t.TgZ(36,"mat-form-field",10),t._uU(37,"\n                        "),t._UZ(38,"input",17),t._uU(39,"\n                      "),t.qZA(),t._uU(40,"\n                  "),t.qZA(),t._uU(41,"\n                  "),t.TgZ(42,"button",18),t._uU(43,"\n                    "),t.YNc(44,B,2,0,"span",12),t._uU(45,"\n                    "),t.YNc(46,Q,2,2,"mat-progress-spinner",19),t._uU(47,"\n                "),t.qZA(),t._uU(48,"\n\n                "),t.qZA()}if(2&n){const a=t.oxw();t.Q6J("formGroup",a.dataForm),t.xp6(8),t.Q6J("ngIf",a.dataForm.get("nombre_atleta").hasError("required")),t.xp6(7),t.Q6J("ngIf",a.dataForm.get("talla").hasError("required")),t.xp6(5),t.Q6J("ngIf",a.competenciaList),t.xp6(10),t.Q6J("ngForOf",a.categoriaList),t.xp6(3),t.Q6J("ngIf",a.dataForm.get("id_categoria").hasError("required")),t.xp6(11),t.Q6J("ngIf",!a.dataForm.disabled),t.xp6(2),t.Q6J("ngIf",a.dataForm.disabled)}}class u{constructor(e,a,l,i,d){this.formBuilder=e,this.atletaService=a,this.categoriaService=l,this._decimalPipe=i,this.router=d,this.categoriaList=[],this.competenciaList=[],this.atletasByCompetencia=[],this.tipoDocumento=["C\xe9dula de ciudadan\xeda","Tarjeta de identidad","C\xe9dula de extranjer\xeda","Pasaporte","Permiso temporal de permanencia"],this.idCategoria=""}ngOnInit(){this.userLogin=JSON.parse(localStorage.getItem("authenticatedData")||""),this.createForm(),this.findCompetenciasInicio()}createForm(){this.dataForm=this.formBuilder.group({nombre_atleta:["",[r.kI.required]],talla:["",[r.kI.required]],tiempo_competencia:[null],id_categoria:["",[r.kI.required]],id_competencia:["",[r.kI.required]],id_usuario:[this.userLogin.id,[r.kI.required]],no_atleta:["",[r.kI.required]],no_oleada:[""],estado:["EN_COMPETENCIA"]})}onSubmit(){console.log("this.dataForm",this.dataForm.value),this.dataForm.invalid||this.validarCedula()?console.log("Inv\xe1lido"):this.saveAtleta()}saveAtleta(){console.log("save saveAtleta"),console.log("this.dataForm.",this.dataForm.value),this.atletaService.saveAtleta(this.dataForm.value).subscribe({next:e=>{console.log("data atleta",e),"OK"==e?.response&&this.enviarEmail()},error:e=>{}})}enviarEmail(){var e=this;return(0,F.Z)(function*(){const l=e.categoriaList.find(i=>i.id===e.dataForm.get("id_categoria")?.value);yield e.atletaService.enviarEmail(e.userLogin,e.dataForm.value,e.competenciaList[0],l?.nombre,!1,"\xa1Inscripci\xf3n Confirmada a la Carrera OCR!").subscribe({next:i=>{console.log("data",i),"OK"==i?.response&&(alertify.set("notifier","position","top-right"),alertify.success("Competencia creada con exito!",2),e.router.navigate(["/home"]))},error:i=>{}})})()}findCompetenciasInicio(){this.categoriaService.getCompetenciasInicio().subscribe({next:e=>{console.log("data Competencia",e),this.competenciaList=e},error:e=>{}})}getCategoriaByCompetenciaId(e){this.atletaService.getCategoriaByCompetenciaId(e).subscribe({next:a=>{console.log("data Categoria",a),this.categoriaList=a},error:a=>{}})}getCountAtletasByCompetencia(e){this.atletaService.getCountAtletasByCompetencia(e).subscribe({next:a=>{this.atletasByCompetencia=a,console.log("data Atleta",a),this.dataForm.get("no_atleta")?.setValue(this._decimalPipe.transform(a.length+1,"3.0-0")?.toString())},error:a=>{}})}selectCompetencia(e){console.log("element",e),this.getCategoriaByCompetenciaId(e.id)}selectCategoria(e){console.log("categoria",e),this.idCategoria=e.id.toString(),this.getCategoriaByCompetenciaId(e.id_competencia),this.getCountAtletasByCompetencia(e.id_competencia)}validarCedula(){let e=!1;const a=this.atletasByCompetencia.find(l=>l.id_usuario===this.dataForm.get("id_usuario")?.value);return console.log("findAtleta",a),a&&(e=!0,alertify.set("notifier","position","top-right"),alertify.warning("El atleta "+this.userLogin?.nombre+" ya se encuentra registrado en esta competencia.",5)),e}}u.\u0275fac=function(e){return new(e||u)(t.Y36(r.qu),t.Y36(y.r),t.Y36(_.n),t.Y36(c.JJ),t.Y36(g.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-createatleta"]],decls:33,vars:1,consts:[[1,"inner-container","bg-white","section-gap-lg"],[1,"container"],["fxLayout","row wrap","fxLayoutAlign","center center"],["fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","80","fxFlex.lg","70","fxFlex.xl","70"],["fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","50","fxFlex.lg","50","fxFlex.xl","50"],[1,"form-img","register-image-atleta"],[1,"register-form","form-margin"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[1,"w-100","mt-3"],["matInput","","type","text","formControlName","nombre_atleta","placeholder","Nombre","required",""],[4,"ngIf"],["matInput","","type","text","formControlName","talla","placeholder","Talla","required",""],["class","w-full overflow-hidden","formControlName","id_competencia","style","width: 100%","placeholder","Seleccione una Competencia",4,"ngIf"],["formControlName","id_categoria","placeholder","Seleccione una Categor\xeda",1,"w-full","overflow-hidden",2,"width","100%"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","no_atleta","placeholder","N\xfamero de Atleta","required","","readonly",""],["color","primary","mat-flat-button","","type","submit",1,"button-lg","mb-3"],[3,"diameter","mode",4,"ngIf"],["formControlName","id_competencia","placeholder","Seleccione una Competencia",1,"w-full","overflow-hidden",2,"width","100%"],[3,"value","click"],[3,"diameter","mode"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n    "),t.TgZ(2,"div",1),t._uU(3,"\n      "),t.TgZ(4,"div",2),t._uU(5,"\n        "),t.TgZ(6,"div",3),t._uU(7,"\n          "),t.TgZ(8,"div",2),t._uU(9,"\n            "),t.TgZ(10,"div",4),t._uU(11,"\n              "),t.TgZ(12,"div",5),t._uU(13,"\n              "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"div",4),t._uU(17,"\n              "),t.TgZ(18,"mat-card",6),t._uU(19,"\n                "),t.TgZ(20,"h4"),t._uU(21,"Registrar atleta"),t.qZA(),t._uU(22,"\n                "),t._uU(23,"\n                "),t.YNc(24,Y,49,8,"form",7),t._uU(25,"\n              "),t.qZA(),t._uU(26,"\n            "),t.qZA(),t._uU(27,"\n          "),t.qZA(),t._uU(28,"\n        "),t.qZA(),t._uU(29,"\n      "),t.qZA(),t._uU(30,"\n    "),t.qZA(),t._uU(31,"\n  "),t.qZA(),t._uU(32,"\n  ")),2&e&&(t.xp6(24),t.Q6J("ngIf",a.dataForm))},dependencies:[c.sg,c.O5,f.xw,f.Wh,f.yH,h.a8,x.lW,p.TO,p.KE,U.Nt,Z.Ou,A.gD,T.ey,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u]});const O=[{path:"register",component:u}];class s{}s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(O),g.Bz]});var b=o(69814),D=o(56709),K=o(77331),M=o(99602),j=o(65412),P=o(37084),q=o(90782),G=o(97392),H=o(96338),R=o(81561),X=o(73162),$=o(71948),z=o(23267),W=o(87314),V=o(17009),w=o(30671),k=o(3848),tt=o(83683),et=o(10266),at=o(1480);class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({providers:[c.JJ],imports:[c.ez,s,b.o9,h.QW,x.ot,R.Tx,tt.g0,G.Ps,U.c,M.FA,T.XK,Z.Cq,w.p0,P.To,A.LD,V.ZX,et.AV,K.Hi,H.ie,z.SJ,k.Nh,X.Cv,D.p9,W.KP,$.Fk,j.Is,q.N6,at.gK,p.lN,r.u5,r.UX]})}}]);